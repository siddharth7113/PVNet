renewable: pv_uk
work_dir: ${hydra:runtime.cwd}
model_name: default
debug: false
print_config: true
ignore_warnings: true
test_after_training: false
seed: 2727831
trainer:
  _target_: lightning.pytorch.trainer.trainer.Trainer
  accelerator: auto
  devices: auto
  min_epochs: null
  max_epochs: null
  reload_dataloaders_every_n_epochs: 0
  num_sanity_val_steps: 8
  fast_dev_run: false
  accumulate_grad_batches: 4
  log_every_n_steps: 50
model:
  _target_: pvnet.models.multimodal.multimodal.Model
  output_quantiles:
  - 0.02
  - 0.1
  - 0.25
  - 0.5
  - 0.75
  - 0.9
  - 0.98
  nwp_encoders_dict:
    ukv:
      _target_: pvnet.models.multimodal.encoders.encoders3d.DefaultPVNet
      _partial_: true
      in_channels: 2
      out_features: 256
      number_of_conv3d_layers: 6
      conv3d_channels: 32
      image_size_pixels: 24
    ecmwf:
      _target_: pvnet.models.multimodal.encoders.encoders3d.DefaultPVNet
      _partial_: true
      in_channels: 12
      out_features: 256
      number_of_conv3d_layers: 4
      conv3d_channels: 32
      image_size_pixels: 12
  sat_encoder:
    _target_: pvnet.models.multimodal.encoders.encoders3d.DefaultPVNet
    _partial_: true
    in_channels: 11
    out_features: 256
    number_of_conv3d_layers: 6
    conv3d_channels: 32
    image_size_pixels: 24
  add_image_embedding_channel: false
  pv_encoder:
    _target_: pvnet.models.multimodal.site_encoders.encoders.SingleAttentionNetwork
    _partial_: true
    num_sites: 349
    out_features: 40
    num_heads: 4
    kdim: 40
    id_embed_dim: 20
  output_network:
    _target_: pvnet.models.multimodal.linear_networks.networks.ResFCNet2
    _partial_: true
    fc_hidden_features: 128
    n_res_blocks: 6
    res_block_layers: 2
    dropout_frac: 0.0
  embedding_dim: 16
  include_sun: true
  include_gsp_yield_history: false
  forecast_minutes: 480
  history_minutes: 120
  min_sat_delay_minutes: 60
  sat_history_minutes: 90
  pv_history_minutes: 180
  nwp_history_minutes:
    ukv: 120
    ecmwf: 120
  nwp_forecast_minutes:
    ukv: 480
    ecmwf: 480
  nwp_interval_minutes:
    ukv: 60
    ecmwf: 60
  optimizer:
    _target_: pvnet.optimizers.EmbAdamWReduceLROnPlateau
    lr: 0.0001
    weight_decay: 0.01
    amsgrad: true
    patience: 5
    factor: 0.1
    threshold: 0.002
datamodule:
  _target_: pvnet.data.datamodule.DataModule
  configuration: /media/siddharth899/E/OSS/OpenClimateFix/open-data-pvnet/PVNet/configs/datamodule/configuration/example_configuration.yaml
  num_workers: 4
  prefetch_factor: 2
  batch_size: 8
  sample_output_dir: OUTPUT
  num_train_samples: 2
  num_val_samples: 1
  train_period:
  - null
  - '2023-01-02'
  val_period:
  - '2023-01-01'
  - '2023-01-02'
callbacks:
  early_stopping:
    _target_: pvnet.callbacks.MainEarlyStopping
    monitor: ${resolve_monitor_loss:${model.output_quantiles}}
    mode: min
    patience: 10
    min_delta: 0
  learning_rate_monitor:
    _target_: lightning.pytorch.callbacks.LearningRateMonitor
    logging_interval: epoch
  model_summary:
    _target_: lightning.pytorch.callbacks.ModelSummary
    max_depth: 3
  model_checkpoint:
    _target_: lightning.pytorch.callbacks.ModelCheckpoint
    monitor: ${resolve_monitor_loss:${model.output_quantiles}}
    mode: min
    save_top_k: 1
    save_last: true
    every_n_epochs: 1
    verbose: false
    filename: epoch={epoch}-step={step}
    dirpath: PLACEHOLDER/${model_name}
    auto_insert_metric_name: false
    save_on_train_epoch_end: false
logger:
  wandb:
    _target_: lightning.pytorch.loggers.wandb.WandbLogger
    project: PLACEHOLDER
    name: ${model_name}
    save_dir: PLACEHOLDER
    offline: false
    id: null
    log_model: false
    prefix: ''
    job_type: train
    group: ''
    tags: []
